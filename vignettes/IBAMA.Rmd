---
title: "load_ibama"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{ibama_fines}
  %\VignetteEngine{knitr::knitr}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE, eval = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

The dataset is originally from the Brazilian Institute of Environment and Renewable 
Natural Resources (Ibama), documenting environmental embargoes and fines at the individual
level from 2005 to the present day. The original data is available at
https://servicos.ibama.gov.br/ctf/publico/areasembargadas/ConsultaPublicaAreasEmbargadas.php.  

## Usage

```load_ibama``` downloads and compiles data on environmental fines at the municipality or
state levels considering the Amazon region. The user has the option to either download
or load the previously stored raw data, choosing a time-location aggregation level.

The function returns a data frame with aggregates considering, for each
time-location period, counts for total the number of infractions, 
infractions that already went to trial, and 
number of unique perpetrators of infractions.

The user has the option of obtaining data either in Portuguese or in English.

To download the data from Ibama's website, set ```download_data = TRUE``` and choose
a destination for your data by parameter ```download_directory```. Arguments
```time_unit``` and ```geographic_unit``` set the levels through which the aggregation
should be done. Available options are by year and/or month, and by state and/or 
municipality, respectively.


```{r , eval = FALSE}
library(datazoom.amazonia)

load_ibama(
  download_data = TRUE, 
  download_directory = './Desktop',
  time_unit = c('month', 'year'),
  geographic_unit = c('city', 'state'),
  years = c(2010, 2012),
  language = "english"
  )
```

To load previously download raw data, set ```download_data = FALSE``` and specify the
file's path with the parameter ```load_from_where```. If ```language = 'portuguese```, use 
```geographic_unit = c('municipio', 'uf')``` and ```time_unit = c('ano', 'mes')``` instead:

```{r, eval = FALSE }

load_ibama(
  download_data = 'FALSE', 
  download_directory = './Desktop/data.xls',
  time_unit = 'ano',
  geographic_unit = 'uf',
  years = 2010:2015,
  language = "portuguese"
  )
```


## Credits

Data Zoom is developed by a team at Pontifícia Universidade Católica do Rio de Janeiro (PUC-Rio), Department of Economics. Our official website is at: http://www.econ.puc-rio.br/datazoom/index.html.

